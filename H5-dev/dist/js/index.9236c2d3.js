(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["index"],{9261:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("nav-menu",{ref:"navMenu",attrs:{menuList:t.menuList,username:t.username}}),a("v-toolbar",{attrs:{app:""}},[a("v-toolbar-side-icon",{on:{click:function(e){return e.stopPropagation(),t.hideDrawer(e)}}}),a("v-toolbar-title",[t._v(t._s(t.$route.meta.title))]),a("v-spacer"),a("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[a("v-btn",{attrs:{flat:""},on:{click:function(e){t.resetPsdModal=!0}}},[t._v("修改密码")]),a("v-btn",{attrs:{flat:""},on:{click:function(e){t.logoutModal=!0}}},[t._v("退出登录")])],1)],1),a("v-content",[a("v-container",{attrs:{fluid:""}},[a("v-slide-y-transition",{attrs:{mode:"out-in"}},[a("router-view")],1)],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"400"},model:{value:t.logoutModal,callback:function(e){t.logoutModal=e},expression:"logoutModal"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("提示")]),a("v-card-text",[t._v("确认退出登录？")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:function(e){t.logoutModal=!1}}},[t._v("取消")]),a("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:t.logout}},[t._v("确认")])],1)],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"400"},model:{value:t.resetPsdModal,callback:function(e){t.resetPsdModal=e},expression:"resetPsdModal"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("修改密码")]),a("v-card-text",[a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{rules:t.oriPsdErrors,label:"原密码",type:"password",required:""},model:{value:t.form.oriPsd,callback:function(e){t.$set(t.form,"oriPsd",e)},expression:"form.oriPsd"}}),a("v-text-field",{attrs:{rules:t.newPsdErrors,label:"新密码",type:"password",required:""},model:{value:t.form.newPsd,callback:function(e){t.$set(t.form,"newPsd",e)},expression:"form.newPsd"}}),a("v-text-field",{attrs:{rules:t.conPsdErrors,label:"再次确认",type:"password",required:""},model:{value:t.form.conPsd,callback:function(e){t.$set(t.form,"conPsd",e)},expression:"form.conPsd"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:t.clear}},[t._v("取消")]),a("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:t.submit}},[t._v("确认")])],1)],1)],1),a("v-snackbar",{attrs:{top:"",timeout:3e3},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n    "+t._s(t.snackbarText)+"\n  ")])],1)},r=[],i=(a("dc12"),a("a700")),o=a.n(i),s=(a("4694"),a("9dce"),a("d6e8"),a("b709"),a("e9fc"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-navigation-drawer",{attrs:{"mini-variant":t.mini,dark:"",fixed:"",app:""},on:{"update:miniVariant":function(e){t.mini=e},"update:mini-variant":function(e){t.mini=e}},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-list",{staticClass:"pa-1"},[t.mini?a("v-list-tile",{on:{click:function(e){e.stopPropagation(),t.mini=!t.mini}}},[a("v-list-tile-action",[a("v-icon",[t._v("chevron_right")])],1)],1):t._e(),a("v-list-tile",{attrs:{avatar:"",tag:"div"}},[a("v-list-tile-avatar",[a("img",{attrs:{src:"https://i.loli.net/2017/08/21/599a521472424.jpg"}})]),a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(t.username))])],1),a("v-list-tile-action",[a("v-btn",{attrs:{icon:""},on:{click:function(e){e.stopPropagation(),t.mini=!t.mini}}},[a("v-icon",[t._v("chevron_left")])],1)],1)],1)],1),a("v-list",{staticClass:"pt-0",attrs:{dense:""}},[a("v-divider",{attrs:{light:""}}),t._l(t.menuList,function(e){return[e.children&&e.children.length>0?a("v-list-group",{key:e.id,attrs:{"prepend-icon":e.icon,value:e.children.some(function(e){return e.name===t.$route.name})}},[a("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-tile-title",{attrs:{ripple:""}},[t._v(t._s(e.label))])],1),t._l(e.children,function(e){return a("v-list-tile",{key:e.id,attrs:{to:e.url,ripple:""}},[a("v-list-tile-action",[t.mini?a("div",{attrs:{title:e.label,small:""}},[t._v(t._s(e.label[0]))]):t._e()]),a("v-list-tile-content",[a("v-list-tile-title",{attrs:{title:e.label,ripple:""}},[t._v(t._s(e.label))])],1)],1)})],2):a("v-list-tile",{key:e.id,attrs:{to:e.url,title:e.label,ripple:""}},[a("v-list-tile-action",[a("v-icon",[t._v(t._s(e.icon))])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(e.label))])],1)],1)]})],2)],1)}),l=[],c={name:"nav-menu",data:function(){return{drawer:null,mini:!1}},props:{menuList:{type:Array,default:function(){return[]}},username:{type:String,default:""}}},d=c,u=a("fc05"),v=a("6570"),f=a.n(v),m=a("f5a3"),p=a("1085"),b=a("8701"),_=a("1777"),h=a("30d7"),k=a("cadc"),g=a("a678"),w=a("0493"),P=a("d543"),V=a("a83f"),x=Object(u["a"])(d,s,l,!1,null,null,null),T=x.exports;f()(x,{VBtn:m["a"],VDivider:p["a"],VIcon:b["a"],VList:_["a"],VListGroup:h["a"],VListTile:k["a"],VListTileAction:g["a"],VListTileAvatar:w["a"],VListTileContent:P["a"],VListTileTitle:P["b"],VNavigationDrawer:V["a"]});var $=a("f8c8"),C={name:"index",components:{"nav-menu":T},data:function(){var t=this;return{menuList:[],username:"",logoutModal:!1,resetPsdModal:!1,form:{oriPsd:"",newPsd:"",conPsd:""},valid:!1,oriPsdErrors:[function(t){return!!t||"请输入原密码"}],newPsdErrors:[function(t){return!!t||"请输入新密码"},function(e){return e!==t.form.oriPsd||"请输入不同于原密码的新密码"}],conPsdErrors:[function(t){return!!t||"请输入新密码"},function(e){return e===t.form.newPsd||"两次输入密码不一致"}],snackbar:!1,snackbarText:""}},methods:{hideDrawer:function(){this.$refs.navMenu.drawer=!this.$refs.navMenu.drawer},logout:function(){var t=this;this.$store.dispatch("userLogout").then(function(){t.$router.replace("login")})},clear:function(){this.resetPsdModal=!1,this.$refs.form.reset(),this.$refs.form.resetValidation()},submit:function(){var t=this;if(!this.$refs.form.validate())return!1;$["a"].updatePassord().then(function(e){e.resultCode,e.result;var a=e.msg;t.snackbarText=a,t.snackbar=!0,t.resetPsdModal=!1,t.clear()})}},mounted:function(){var t=this;return new o.a(function(e,a){$["a"].userInfo().then(function(a){a.resultCode;var n=a.result;a.msg;t.$store.dispatch("saveUserInfo",n),e(n)}).catch(function(t){a(t)})}).then(function(e){t.username=e.name,t.menuList=e.menu}).catch(function(){t.snackbarText="验证用户信息失败，请重新登录",t.snackbar=!0,setTimeout(function(){t.$store.dispatch("userLogout").then(function(){t.$router.replace("login")})},3e3)})}},M=C,L=a("e979"),y=a("65bf"),E=a("5632"),j=a("1e82"),O=a("637d"),A=a("0655"),D=a("e3a0"),I=a("b5e7"),S=a("d4c1"),q=a("b779"),B=a("5546"),F=a("9c14"),J=a("975d"),G=a("07b3"),N=a("f86c"),U=a("0009"),Y=a("14d2"),z=Y["a"].extend({name:"v-toolbar-side-icon",functional:!0,render:function(t,e){var a=e.slots,n=e.listeners,r=e.props,i=e.data,o=i.staticClass?i.staticClass+" v-toolbar__side-icon":"v-toolbar__side-icon",s=Object.assign(i,{staticClass:o,props:Object.assign(r,{icon:!0}),on:n}),l=a().default;return t(N["a"],s,l||[t(U["a"],"$vuetify.icons.menu")])}}),H=Object(G["e"])("v-toolbar__title"),K=Object(G["e"])("v-toolbar__items"),Q=(J["a"],Object(u["a"])(M,n,r,!1,null,null,null));e["default"]=Q.exports;f()(Q,{VApp:L["a"],VBtn:m["a"],VCard:y["a"],VCardActions:E["a"],VCardText:E["b"],VCardTitle:j["a"],VContainer:O["a"],VContent:A["a"],VDialog:D["a"],VForm:I["a"],VSlideYTransition:S["d"],VSnackbar:q["a"],VSpacer:B["a"],VTextField:F["a"],VToolbar:J["a"],VToolbarItems:K,VToolbarSideIcon:z,VToolbarTitle:H})}}]);
//# sourceMappingURL=index.9236c2d3.js.map